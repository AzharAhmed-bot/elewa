<ng-container>
  <div class="progress-tracker">
    <div class="progress-bar" [ngStyle]="{'width': progressPercentage + '%', 'background-image': getProgressColor(progressPercentage)}"></div>
    <div class="progress-text">
      {{ progressPercentage | number : '1.0-0' }}% Complete
    </div>
  </div>

  <!-- BANNERS TO DISPLAY SHOWING DIFFERENT OUTCOMES -->
  <ng-container *ngIf="pageViewMode === 2">
    <div>
      <div class="feedback-section">
        <div class="fail-feedback" *ngIf="resultsMode.failedAndHasRetries">
          <!-- Image  -->
          <div class="image">
            <img src="/assets/icons/assessment-failed-feedback-img.svg" />  
          </div>
          <!-- Feedback-text -->
          <div class="feedback-text">
            <p> {{ "ASSESSMENT-PAGE.FAIL-FEEDBACK.FAIL-MESSAGE.INTRO" | transloco}} </p>
            <p>
              <span>{{ "ASSESSMENT-PAGE.FAIL-FEEDBACK.FAIL-MESSAGE.TRIAL-TEXT.INTRO" | transloco}} </span>
                {{allowedAttempts}}
              <span>{{ "ASSESSMENT-PAGE.FAIL-FEEDBACK.FAIL-MESSAGE.TRIAL-TEXT.END" | transloco}}</span>
            </p>
            <p> {{ "ASSESSMENT-PAGE.FAIL-FEEDBACK.FAIL-MESSAGE.RETAKE-TEXT" | transloco}} </p>
          </div>
        </div>
        
        <!-- CTA Buttons -->
        <div class="btns">
          <button class="__retryAssessment" mat-raised-button  (click)="retryAssessment()" *ngIf="resultsMode.failedAndHasRetries || resultsMode.passedAndHasRetries"> {{"ASSESSMENT-PAGE.BUTTONS-TEXT.RETRY-NOW-BUTTON" | transloco}}  </button>
        </div> 
      </div>
     </div>
  </ng-container>

  <app-assessment-view 
    [assessmentForm]="assessmentForm" 
    [assessmentFormArray]="assessmentFormArray"
    [progressBarCallback]="getProgressBar.bind(this)">
  </app-assessment-view>

  <ng-container>
    <div class="buttons-section" *ngIf="assessmentForm">
      <div class="stepper-buttons" *ngIf="stepperForm === true">
        <button class="previous" mat-raised-button (click)="prevStep()" [disabled]="currentStep === 0" [hidden]="currentStep === 0">{{ "ASSESSMENT-PAGE.BUTTONS-TEXT.PREVIOUS" | transloco }}</button>
        <button class="next" mat-raised-button (click)="nextStep(currentStep)" [disabled]="currentStep === totalSteps - 1 && assessmentFormArray.at(currentStep).get('selectedOption')?.invalid" [hidden]="currentStep === totalSteps - 1">{{ "ASSESSMENT-PAGE.BUTTONS-TEXT.NEXT-BUTTON" | transloco }}</button>
      </div>
      <!-- submit button -->
      <div class="submit-btn flex-submit" *ngIf="!stepperForm || currentStep === totalSteps - 1  ">
        <button class="btn-btns" mat-raised-button (click)="saveProgress(currentStep)">
          <span>{{ "ASSESSMENT-PAGE.BUTTONS-TEXT.SUBMIT-TEXT" | transloco }}</span>
        </button>
      </div>
    </div>
  </ng-container>

</ng-container>

