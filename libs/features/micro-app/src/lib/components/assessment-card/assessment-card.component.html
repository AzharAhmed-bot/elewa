<div *ngIf="assessmentFormArray" >
  <div *ngIf="!stepperForm">
    <form [formGroup]="assessmentForm">
      <div formArrayName="assessmentFormArray">
        <mat-card class="question-card" *ngFor="let question of assessmentFormArray.controls; let i = index" [formGroupName]="i">
          <mat-card-header class="question-header">
            Question {{i + 1}}
          </mat-card-header>
          <mat-card-content class="question-content">
            <p>{{ question?.get('question')?.value }}</p>
            <mat-radio-group aria-label="Select an option" class="column-radios" formControlName="selectedOption">
              <mat-radio-button *ngFor="let option of question.get('options')?.value" [value]="option">{{option}}</mat-radio-button>
            </mat-radio-group>    
          </mat-card-content>
        </mat-card>
      </div>
    </form>
  </div>

  <!-- Stepper Form -->
    <div *ngIf="stepperForm">
      <form [formGroup]="assessmentForm">
        <div formArrayName="assessmentFormArray">
          <mat-card class="question-card" *ngIf="currentStep >= 0 && currentStep < totalSteps" [formGroupName]="currentStep">
            <mat-card-header class="question-header">
              Question {{currentStep + 1}}
            </mat-card-header>
            <mat-card-content class="question-content">
              <mat-radio-group aria-label="Select an option" class="column-radios" formControlName="selectedOption">
                <mat-radio-button *ngFor="let option of assessmentFormArray.at(currentStep).get('options')?.value" [value]="option">{{ option }}</mat-radio-button>
              </mat-radio-group>
            </mat-card-content>
          </mat-card>
        </div>
      </form>
      <div class="stepper-buttons">
        <button class="btn-btns" mat-raised-button (click)="prevStep()" [hidden]="currentStep === 0">Previous</button>
        <button class="btn-btns" mat-raised-button (click)="nextStep()" [disabled]="currentStep === totalSteps - 1">Next</button>
      </div>
    </div>
</div>

